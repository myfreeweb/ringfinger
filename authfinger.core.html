<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>authfinger.core documentation</title></head><body><div id="header"><h1><a href="index.html">Ringfinger 0.2.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3>Namespaces</h3><ul><li class="current"><a href="authfinger.core.html">authfinger.core</a></li><li><a href="authfinger.default-views.html">authfinger.default-views</a></li><li><a href="authfinger.routes.html">authfinger.routes</a></li><li><a href="basefinger.core.html">basefinger.core</a></li><li><a href="basefinger.inmem.html">basefinger.inmem</a></li><li><a href="basefinger.mongodb.html">basefinger.mongodb</a></li><li><a href="basefinger.session.html">basefinger.session</a></li><li><a href="corefinger.core.html">corefinger.core</a></li><li><a href="corefinger.middleware.html">corefinger.middleware</a></li><li><a href="fastfinger.actions.html">fastfinger.actions</a></li><li><a href="fastfinger.hooks.html">fastfinger.hooks</a></li><li><a href="fastfinger.misc.html">fastfinger.misc</a></li><li><a href="formfinger.core.html">formfinger.core</a></li><li><a href="formfinger.field-helpers.html">formfinger.field-helpers</a></li><li><a href="formfinger.fields.html">formfinger.fields</a></li><li><a href="mailfinger.console.html">mailfinger.console</a></li><li><a href="mailfinger.postmark.html">mailfinger.postmark</a></li><li><a href="mailfinger.sendmail.html">mailfinger.sendmail</a></li><li><a href="mailfinger.smtp.html">mailfinger.smtp</a></li><li><a href="restfinger.core.html">restfinger.core</a></li><li><a href="restfinger.default-views.html">restfinger.default-views</a></li><li><a href="restfinger.output.html">restfinger.output</a></li><li><a href="secfinger.html">secfinger</a></li><li><a href="toolfinger.html">toolfinger</a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="authfinger.core.html#var-get-user">get-user</a></li><li><a href="authfinger.core.html#var-make-user">make-user</a></li><li><a href="authfinger.core.html#var-make-username-hook">make-username-hook</a></li><li><a href="authfinger.core.html#var-with-login-field">with-login-field</a></li><li><a href="authfinger.core.html#var-with-salt">with-salt</a></li><li><a href="authfinger.core.html#var-wrap-auth">wrap-auth</a></li></ul></div><div class="namespace-docs" id="content"><h2>authfinger.core documentation</h2><pre class="doc">Low-level authorization API (creating users, getting users after checking) and the auth middleware.
</pre><div class="public" id="var-get-user"><h3>get-user</h3><div class="usage"><code>(get-user db coll login password)</code></div><pre class="doc">Returns a user from coll in db with given
login field value and password if the password is valid</pre></div><div class="public" id="var-make-user"><h3>make-user</h3><div class="usage"><code>(make-user db coll user password)</code></div><pre class="doc">Creates a user in coll in db with given fields
(the one specified by *login-field*, :username by default
and whatever you need) and password</pre></div><div class="public" id="var-make-username-hook"><h3>make-username-hook</h3><div class="usage"><code>(make-username-hook {:keys [db coll owner-field], :or {db inmem, coll :ringfinger_auth, owner-field :owner}})</code></div><pre class="doc">Returns a restfinger hook which changes returned owner-field value
from the user id to the value of *login-field*
Options: :db, :coll (the ones you use with wrap-auth and auth-routes)
and owner-field</pre></div><div class="public" id="var-with-login-field"><h3>with-login-field</h3><div class="usage"><code>(with-login-field login-field &amp; body)</code></div><pre class="doc">Changes the field used for logging in, default is :username
</pre></div><div class="public" id="var-with-salt"><h3>with-salt</h3><div class="usage"><code>(with-salt salt &amp; body)</code></div><pre class="doc">Changes the fixed part of the salt used for password hashing.
Wrap both app call and auth-routes calls (they're usually nested,
but you're free to (def something (auth-routes {â€¦})), right?).
And (make|get)-user call if you do them (in tests?)
Change the salt once to a random value and NEVER change it later
(or your app's users will seriously hate you)</pre></div><div class="public" id="var-wrap-auth"><h3>wrap-auth</h3><div class="usage"><code>(wrap-auth handler)</code><code>(wrap-auth handler {:keys [db coll], :or {db inmem, coll :ringfinger_auth}})</code></div><pre class="doc">Ring middleware that adds :user if there's a user logged in. Supports session/form-based auth and HTTP Basic auth
</pre></div></div></body></html>